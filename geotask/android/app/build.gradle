plugins {
  id 'com.android.application'
  id 'org.jetbrains.kotlin.android'
  id 'dev.flutter.flutter-gradle-plugin'
}

// --- pode vir AQUI a leitura da key (sempre DEPOIS do plugins) ---
def localProps = new Properties()
def localPropsFile = rootProject.file('local.properties')
if (localPropsFile.exists()) {
    localPropsFile.withInputStream { localProps.load(it) }
}
def mapsApiKey = localProps.getProperty('MAPS_API_KEY') ?: System.getenv('MAPS_API_KEY') ?: ""
// ------------------------------------------------------------------



android {
    namespace 'com.example.geotask'    // ajusta
    compileSdkVersion 36

    defaultConfig {
        applicationId 'com.example.geotask' // ajusta
        minSdkVersion 24
        targetSdkVersion 36
        versionCode 1
        versionName "1.0"
        multiDexEnabled true
        // (se usares placeholder da key)
        manifestPlaceholders = [ MAPS_API_KEY: mapsApiKey ]
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
        coreLibraryDesugaringEnabled true
    }
    kotlinOptions { jvmTarget = '17' }

    buildTypes {
        release {
            minifyEnabled false
            shrinkResources false
            signingConfig signingConfigs.debug
        }
        debug {
            minifyEnabled false
            shrinkResources false
        }
    }
}

dependencies {
    implementation "androidx.core:core-ktx:1.16.0"
    implementation "androidx.multidex:multidex:2.0.1"
    coreLibraryDesugaring "com.android.tools:desugar_jdk_libs:2.1.4"
}
